(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-be932168"],{"06da":function(e,t,o){},"245d":function(e,t,o){"use strict";var a={aliyun:[{name:"华东 1（杭州）",val:"oss-cn-hangzhou.aliyuncs.com"},{name:"华东 2（上海）",val:"oss-cn-shanghai.aliyuncs.com"},{name:"华北 1（青岛）",val:"oss-cn-qingdao.aliyuncs.com"},{name:"华北 2（北京）",val:"oss-cn-beijing.aliyuncs.com"},{name:"华北 3（张家口）",val:"oss-cn-zhangjiakou.aliyuncs.com"},{name:"华北 5（呼和浩特）",val:"oss-cn-huhehaote.aliyuncs.com"},{name:"华南 1（深圳）",val:"oss-cn-shenzhen.aliyuncs.com"},{name:"西南 1（成都）",val:"oss-cn-chengdu.aliyuncs.com"},{name:"中国（香港）",val:"oss-cn-hongkong.aliyuncs.com"},{name:"美国西部 1 （硅谷）",val:"oss-us-west-1.aliyuncs.com"},{name:"美国东部 1 （弗吉尼亚）",val:"oss-us-east-1.aliyuncs.com"},{name:"亚太东南 1 （新加坡）",val:"oss-ap-southeast-1.aliyuncs.com"},{name:"亚太东南 2 （悉尼）",val:"oss-ap-southeast-2.aliyuncs.com"},{name:"亚太东南 3 （吉隆坡）",val:"oss-ap-southeast-3.aliyuncs.com"},{name:"亚太东南 5 （雅加达）",val:"oss-ap-southeast-5.aliyuncs.com"},{name:"亚太东北 1 （日本）",val:"oss-ap-northeast-1.aliyuncs.com"},{name:"亚太南部 1 （孟买）",val:"oss-ap-south-1.aliyuncs.com"},{name:"欧洲中部 1 （法兰克福）",val:"oss-eu-central-1.aliyuncs.com"},{name:"英国（伦敦）",val:"oss-eu-west-1.aliyuncs.com"},{name:"中东东部 1 （迪拜）",val:"oss-me-east-1.aliyuncs.com"}],tencent:[{name:"北京",val:"cos.ap-beijing.myqcloud.com"},{name:"上海",val:"cos.ap-shanghai.myqcloud.com"},{name:"广州",val:"cos.ap-guangzhou.myqcloud.com"},{name:"成都",val:"cos.ap-chengdu.myqcloud.com"},{name:"重庆",val:"cos.ap-chongqing.myqcloud.com"},{name:"深圳金融",val:"cos.ap-shenzhen-fsi.myqcloud.com"},{name:"上海金融",val:"cos.ap-shanghai-fsi.myqcloud.com"},{name:"北京金融",val:"cos.ap-beijing-fsi.myqcloud.com"},{name:"中国香港",val:"cos.ap-hongkong.myqcloud.com"},{name:"新加坡",val:"cos.ap-singapore.myqcloud.com"},{name:"孟买",val:"cos.ap-mumbai.myqcloud.com"},{name:"首尔",val:"cos.ap-seoul.myqcloud.com"},{name:"曼谷",val:"cos.ap-bangkok.myqcloud.com"},{name:"东京",val:"cos.ap-tokyo.myqcloud.com"},{name:"硅谷",val:"cos.na-siliconvalley.myqcloud.com"},{name:"弗吉尼亚",val:"cos.na-ashburn.myqcloud.com"},{name:"多伦多",val:"cos.na-toronto.myqcloud.com"},{name:"法兰克福",val:"cos.eu-frankfurt.myqcloud.com"},{name:"莫斯科",val:"cos.eu-moscow"}],huawei:[{name:"非洲-约翰内斯堡",val:"obs.af-south-1.myhuaweicloud.com"},{name:"华北-北京四",val:"obs.cn-north-4.myhuaweicloud.com"},{name:"华北-北京一",val:"obs.cn-north-1.myhuaweicloud.com"},{name:"华东-上海二",val:"obs.cn-east-2.myhuaweicloud.com"},{name:"华东-上海一",val:"obs.cn-east-3.myhuaweicloud.com"},{name:"华南-广州",val:"obs.cn-south-1.myhuaweicloud.com"},{name:"西南-贵阳一",val:"obs.cn-southwest-2.myhuaweicloud.com"},{name:"亚太-曼谷",val:"obs.ap-southeast-2.myhuaweicloud.com"},{name:"亚太-香港",val:"obs.ap-southeast-1.myhuaweicloud.com"},{name:"亚太-新加坡",val:"obs.ap-southeast-3.myhuaweicloud.com"}],qiniu:[{name:"华东",val:"s3-cn-east-1.qiniucs.com"},{name:"华北",val:"s3-cn-north-1.qiniucs.com"},{name:"华南",val:"s3-cn-south-1.qiniucs.com"},{name:"北美",val:"s3-us-north-1.qiniucs.com"},{name:"东南亚",val:"s3-ap-southeast-1.qiniucs.com"}]};t["a"]=a},"27d7":function(e,t,o){"use strict";var a=o("06da"),r=o.n(a);r.a},4127:function(e,t,o){"use strict";var a=o("d233"),r=o("b313"),n={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},s=Date.prototype.toISOString,i={delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,serializeDate:function(e){return s.call(e)},skipNulls:!1,strictNullHandling:!1},l=function e(t,o,r,n,s,l,c,u,m,f,p,d){var y=t;if("function"===typeof c)y=c(o,y);else if(y instanceof Date)y=f(y);else if(null===y){if(n)return l&&!d?l(o,i.encoder):o;y=""}if("string"===typeof y||"number"===typeof y||"boolean"===typeof y||a.isBuffer(y)){if(l){var g=d?o:l(o,i.encoder);return[p(g)+"="+p(l(y,i.encoder))]}return[p(o)+"="+p(String(y))]}var h,v=[];if("undefined"===typeof y)return v;if(Array.isArray(c))h=c;else{var b=Object.keys(y);h=u?b.sort(u):b}for(var w=0;w<h.length;++w){var j=h[w];s&&null===y[j]||(v=Array.isArray(y)?v.concat(e(y[j],r(o,j),r,n,s,l,c,u,m,f,p,d)):v.concat(e(y[j],o+(m?"."+j:"["+j+"]"),r,n,s,l,c,u,m,f,p,d)))}return v};e.exports=function(e,t){var o=e,s=t?a.assign({},t):{};if(null!==s.encoder&&void 0!==s.encoder&&"function"!==typeof s.encoder)throw new TypeError("Encoder has to be a function.");var c="undefined"===typeof s.delimiter?i.delimiter:s.delimiter,u="boolean"===typeof s.strictNullHandling?s.strictNullHandling:i.strictNullHandling,m="boolean"===typeof s.skipNulls?s.skipNulls:i.skipNulls,f="boolean"===typeof s.encode?s.encode:i.encode,p="function"===typeof s.encoder?s.encoder:i.encoder,d="function"===typeof s.sort?s.sort:null,y="undefined"!==typeof s.allowDots&&s.allowDots,g="function"===typeof s.serializeDate?s.serializeDate:i.serializeDate,h="boolean"===typeof s.encodeValuesOnly?s.encodeValuesOnly:i.encodeValuesOnly;if("undefined"===typeof s.format)s.format=r["default"];else if(!Object.prototype.hasOwnProperty.call(r.formatters,s.format))throw new TypeError("Unknown format option provided.");var v,b,w=r.formatters[s.format];"function"===typeof s.filter?(b=s.filter,o=b("",o)):Array.isArray(s.filter)&&(b=s.filter,v=b);var j,O=[];if("object"!==typeof o||null===o)return"";j=s.arrayFormat in n?s.arrayFormat:"indices"in s?s.indices?"indices":"repeat":"indices";var k=n[j];v||(v=Object.keys(o)),d&&v.sort(d);for(var q=0;q<v.length;++q){var x=v[q];m&&null===o[x]||(O=O.concat(l(o[x],x,k,u,m,f?p:null,b,d,y,g,w,h)))}var S=O.join(c),A=!0===s.addQueryPrefix?"?":"";return S.length>0?A+S:""}},4328:function(e,t,o){"use strict";var a=o("4127"),r=o("9e6a"),n=o("b313");e.exports={formats:n,parse:r,stringify:a}},"9e6a":function(e,t,o){"use strict";var a=o("d233"),r=Object.prototype.hasOwnProperty,n={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:a.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},s=function(e,t){for(var o={},a=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,i=a.split(t.delimiter,s),l=0;l<i.length;++l){var c,u,m=i[l],f=m.indexOf("]="),p=-1===f?m.indexOf("="):f+1;-1===p?(c=t.decoder(m,n.decoder),u=t.strictNullHandling?null:""):(c=t.decoder(m.slice(0,p),n.decoder),u=t.decoder(m.slice(p+1),n.decoder)),r.call(o,c)?o[c]=[].concat(o[c]).concat(u):o[c]=u}return o},i=function(e,t,o){for(var a=t,r=e.length-1;r>=0;--r){var n,s=e[r];if("[]"===s)n=[],n=n.concat(a);else{n=o.plainObjects?Object.create(null):{};var i="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,l=parseInt(i,10);!isNaN(l)&&s!==i&&String(l)===i&&l>=0&&o.parseArrays&&l<=o.arrayLimit?(n=[],n[l]=a):n[i]=a}a=n}return a},l=function(e,t,o){if(e){var a=o.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,n=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,l=n.exec(a),c=l?a.slice(0,l.index):a,u=[];if(c){if(!o.plainObjects&&r.call(Object.prototype,c)&&!o.allowPrototypes)return;u.push(c)}var m=0;while(null!==(l=s.exec(a))&&m<o.depth){if(m+=1,!o.plainObjects&&r.call(Object.prototype,l[1].slice(1,-1))&&!o.allowPrototypes)return;u.push(l[1])}return l&&u.push("["+a.slice(l.index)+"]"),i(u,t,o)}};e.exports=function(e,t){var o=t?a.assign({},t):{};if(null!==o.decoder&&void 0!==o.decoder&&"function"!==typeof o.decoder)throw new TypeError("Decoder has to be a function.");if(o.ignoreQueryPrefix=!0===o.ignoreQueryPrefix,o.delimiter="string"===typeof o.delimiter||a.isRegExp(o.delimiter)?o.delimiter:n.delimiter,o.depth="number"===typeof o.depth?o.depth:n.depth,o.arrayLimit="number"===typeof o.arrayLimit?o.arrayLimit:n.arrayLimit,o.parseArrays=!1!==o.parseArrays,o.decoder="function"===typeof o.decoder?o.decoder:n.decoder,o.allowDots="boolean"===typeof o.allowDots?o.allowDots:n.allowDots,o.plainObjects="boolean"===typeof o.plainObjects?o.plainObjects:n.plainObjects,o.allowPrototypes="boolean"===typeof o.allowPrototypes?o.allowPrototypes:n.allowPrototypes,o.parameterLimit="number"===typeof o.parameterLimit?o.parameterLimit:n.parameterLimit,o.strictNullHandling="boolean"===typeof o.strictNullHandling?o.strictNullHandling:n.strictNullHandling,""===e||null===e||"undefined"===typeof e)return o.plainObjects?Object.create(null):{};for(var r="string"===typeof e?s(e,o):e,i=o.plainObjects?Object.create(null):{},c=Object.keys(r),u=0;u<c.length;++u){var m=c[u],f=l(m,r[m],o);i=a.merge(i,f,o)}return a.compact(i)}},b313:function(e,t,o){"use strict";var a=String.prototype.replace,r=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return a.call(e,r,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},d233:function(e,t,o){"use strict";var a=Object.prototype.hasOwnProperty,r=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),n=function(e){var t;while(e.length){var o=e.pop();if(t=o.obj[o.prop],Array.isArray(t)){for(var a=[],r=0;r<t.length;++r)"undefined"!==typeof t[r]&&a.push(t[r]);o.obj[o.prop]=a}}return t},s=function(e,t){for(var o=t&&t.plainObjects?Object.create(null):{},a=0;a<e.length;++a)"undefined"!==typeof e[a]&&(o[a]=e[a]);return o},i=function e(t,o,r){if(!o)return t;if("object"!==typeof o){if(Array.isArray(t))t.push(o);else{if("object"!==typeof t)return[t,o];(r.plainObjects||r.allowPrototypes||!a.call(Object.prototype,o))&&(t[o]=!0)}return t}if("object"!==typeof t)return[t].concat(o);var n=t;return Array.isArray(t)&&!Array.isArray(o)&&(n=s(t,r)),Array.isArray(t)&&Array.isArray(o)?(o.forEach((function(o,n){a.call(t,n)?t[n]&&"object"===typeof t[n]?t[n]=e(t[n],o,r):t.push(o):t[n]=o})),t):Object.keys(o).reduce((function(t,n){var s=o[n];return a.call(t,n)?t[n]=e(t[n],s,r):t[n]=s,t}),n)},l=function(e,t){return Object.keys(t).reduce((function(e,o){return e[o]=t[o],e}),e)},c=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},u=function(e){if(0===e.length)return e;for(var t="string"===typeof e?e:String(e),o="",a=0;a<t.length;++a){var n=t.charCodeAt(a);45===n||46===n||95===n||126===n||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122?o+=t.charAt(a):n<128?o+=r[n]:n<2048?o+=r[192|n>>6]+r[128|63&n]:n<55296||n>=57344?o+=r[224|n>>12]+r[128|n>>6&63]+r[128|63&n]:(a+=1,n=65536+((1023&n)<<10|1023&t.charCodeAt(a)),o+=r[240|n>>18]+r[128|n>>12&63]+r[128|n>>6&63]+r[128|63&n])}return o},m=function(e){for(var t=[{obj:{o:e},prop:"o"}],o=[],a=0;a<t.length;++a)for(var r=t[a],s=r.obj[r.prop],i=Object.keys(s),l=0;l<i.length;++l){var c=i[l],u=s[c];"object"===typeof u&&null!==u&&-1===o.indexOf(u)&&(t.push({obj:s,prop:c}),o.push(u))}return n(t)},f=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},p=function(e){return null!==e&&"undefined"!==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))};e.exports={arrayToObject:s,assign:l,compact:m,decode:c,encode:u,isBuffer:p,isRegExp:f,merge:i}},f8a7:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:8,offset:8}},[o("el-card",{staticClass:"box-card",attrs:{"align-center":"",shadow:"always"}},[o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"auto","status-icon":!0,"element-loading-text":"保存并初始化中."}},[o("el-form-item",{attrs:{label:"站点名称",prop:"siteName"}},[o("el-input",{model:{value:e.form.siteName,callback:function(t){e.$set(e.form,"siteName",t)},expression:"form.siteName"}})],1),o("el-form-item",{attrs:{label:"管理员账号",prop:"username"}},[o("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username","string"===typeof t?t.trim():t)},expression:"form.username"}})],1),o("el-form-item",{attrs:{label:"管理员密码",prop:"password"}},[o("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}})],1),o("el-form-item",{attrs:{label:"站点地址/域名",prop:"domain"}},[o("el-input",{model:{value:e.form.domain,callback:function(t){e.$set(e.form,"domain","string"===typeof t?t.trim():t)},expression:"form.domain"}})],1),o("el-form-item",{attrs:{label:"存储策略"}},[o("el-select",{attrs:{placeholder:"请选择存储策略"},model:{value:e.form.storageStrategy,callback:function(t){e.$set(e.form,"storageStrategy",t)},expression:"form.storageStrategy"}},e._l(e.supportStrategy,(function(e){return o("el-option",{key:e.key,attrs:{label:e.description,value:e.key}})})),1)],1),e._l(e.storageStrategyForm,(function(t){return o("el-form-item",{key:t.title,attrs:{label:t.title}},["endPoint"===t.key&&e.region.hasOwnProperty(e.form.storageStrategy)?o("el-select",{model:{value:e.form.storageStrategyConfig.endPoint,callback:function(t){e.$set(e.form.storageStrategyConfig,"endPoint",t)},expression:"form.storageStrategyConfig.endPoint"}},e._l(e.region[e.form.storageStrategy],(function(e){return o("el-option",{key:e.name,attrs:{label:e.name,value:e.val}})})),1):o("el-input",{model:{value:e.form.storageStrategyConfig[t.key],callback:function(o){e.$set(e.form.storageStrategyConfig,t.key,"string"===typeof o?o.trim():o)},expression:"form.storageStrategyConfig[item.key]"}})],1)})),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确认")])],1)],2)],1)],1)],1)},r=[],n=o("4328"),s=o.n(n),i=o("245d"),l={name:"Install",data:function(){return{active:1,form:{siteName:"",storageStrategy:"",username:"",password:"",domain:window.location.protocol+"//"+window.location.host,storageStrategyConfig:{endPoint:""},loading:!0},storageStrategyForm:[],supportStrategy:[],region:i["a"],rules:{siteName:[{required:!0,message:"请输入站点名称",trigger:"change"}],username:[{required:!0,message:"请输入管理员账号",trigger:"change"}],password:[{required:!0,message:"请输入管理员密码",trigger:"change"}],domain:[{required:!0,type:"url",message:"请输入正确的域名, 需以 http:// 或 https:// 开头",trigger:"change"}]}}},watch:{"form.storageStrategy":function(e){var t=this;this.$http.get("form",{params:{storageType:e}}).then((function(e){t.form.storageStrategyConfig.endPoint=null,t.storageStrategyForm=e.data.data}))}},methods:{submitForm:function(e){var t=this;this.loading=!0,this.$refs[e].validate((function(e){if(!e)return!1;var o=t;t.$http.post("install",s.a.stringify(t.form)).then((function(e){t.loading=!1;var a=e.data;t.$message({message:a.msg,type:0===a.code?"success":"error",duration:1500,onClose:function(){o.$router.push("/main")}})}))}))}},created:function(){var e=this;this.$http.get("is-installed").then((function(t){var o=t.data;0!==o.code&&e.$router.push("/main")}))},mounted:function(){var e=this;this.$http.get("common/support-strategy").then((function(t){e.supportStrategy=t.data.data}))}},c=l,u=(o("27d7"),o("2877")),m=Object(u["a"])(c,a,r,!1,null,"680e1b46",null);t["default"]=m.exports}}]);